<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eagles Basketball - Elite Analytics Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        :root { --gold: #FFB81C; --black: #000000; --red: #ef4444; --green: #22c55e; --blue: #3b82f6; }
        body { background-color: #050505; color: white; font-family: 'Inter', sans-serif; overflow-x: hidden; }
        .text-gold { color: var(--gold); }
        .bg-gold { background-color: var(--gold); }
        .border-gold { border-color: var(--gold); }
        
        /* Interactive Court Styles */
        .court-svg { width: 100%; max-width: 500px; display: block; margin: 0 auto; filter: drop-shadow(0 0 15px rgba(255,184,28,0.05)); }
        .zone { cursor: pointer; transition: all 0.2s ease; opacity: 0.3; stroke: white; stroke-width: 0.3; fill: transparent; }
        .zone:hover { opacity: 0.7; fill: var(--gold); }
        .zone-label { font-size: 2.5px; font-weight: 800; pointer-events: none; fill: white; text-anchor: middle; }
        .heat-elite { fill: var(--green); opacity: 0.7; }
        .heat-good { fill: var(--blue); opacity: 0.6; }
        .heat-avg { fill: var(--gold); opacity: 0.5; }
        .heat-poor { fill: var(--red); opacity: 0.6; }

        /* Component Styling */
        .stat-card { background: #0a0a0a; border: 1px solid #1a1a1a; border-radius: 16px; padding: 1.5rem; transition: border 0.3s; }
        .stat-card:hover { border-color: #333; }
        .nav-btn { font-size: 10px; font-weight: 800; text-transform: uppercase; padding: 10px 18px; border-radius: 9999px; transition: 0.2s; white-space: nowrap; border: 1px solid transparent; }
        .active-nav { background-color: var(--gold); color: black; border-color: var(--gold); }
        .inactive-nav { color: #666; border-color: #222; }
        .inactive-nav:hover { color: white; }
        .stat-input { width: 45px; background: #111; border: 1px solid #333; border-radius: 4px; padding: 4px; text-align: center; font-size: 0.75rem; color: white; }
        .stat-input:focus { border-color: var(--gold); outline: none; }
        .custom-scrollbar::-webkit-scrollbar { height: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: var(--gold); border-radius: 10px; }
        
        /* Goals & Progress */
        .progress-bar { height: 8px; border-radius: 4px; background: #1a1a1a; overflow: hidden; }
        .progress-fill { height: 100%; transition: width 1s ease-in-out; }
        .animate-fadeIn { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // --- 1. FIREBASE INITIALIZATION ---
        const firebaseConfig = { 
            apiKey: "AIzaSyA5H5SsumWG7bym_0EZ7jOlfWeswpSauhk", 
            projectId: "eagles-stats", 
            appId: "1:386723096734:web:b50e343c703983e838b38f" 
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // --- 2. CONSTANTS & ROSTER ---
        const ROSTER = [
            {id: 5, name: "Natasha Mistry", pos: "PG"}, {id: 3, name: "Mikayla Sanders", pos: "PG"}, 
            {id: 22, name: "Christina Lisack", pos: "PG/G"}, {id: 1, name: "Brittney Tang", pos: "G"},
            {id: 2, name: "Kylie Mulcahy", pos: "G"}, {id: 4, name: "Lexi Guild", pos: "G"},
            {id: 10, name: "Reese Jackson", pos: "F"}, {id: 32, name: "Gia Comey", pos: "F"}, 
            {id: 23, name: "Olivia Dozier", pos: "G/F"}, {id: 44, name: "Olivia Fraser", pos: "G/F"},
            {id: 34, name: "Dani Cardona", pos: "C"}, {id: 15, name: "Alexa Troiano", pos: "C"}
        ];

        const STAT_FIELDS = ['fg2m','fg2a','fg3m','fg3a','ftm','fta','reb','ast','stl','blk','to'];
        const ZONES = ['paint', 'ml', 'mr', '3lc', '3lw', '3t', '3rw', '3rc'];

        // --- 3. MAIN APPLICATION COMPONENT ---
        function App() {
            const [view, setView] = React.useState('clipboard');
            const [games, setGames] = React.useState([]);
            const [loading, setLoading] = React.useState(true);

            // New Game Form State
            const [editingId, setEditingId] = React.useState(null);
            const [gameMeta, setGameMeta] = React.useState({ date: '', opp: '', oppScore: 0, venue: 'Away' });
            const [playerStats, setPlayerStats] = React.useState({});
            const [shotMap, setShotMap] = React.useState({ eagles: ZONES.reduce((a,v)=>({...a,[v]:{m:0,x:0}}),{}), opp: ZONES.reduce((a,v)=>({...a,[v]:{m:0,x:0}}),{}) });
            const [setPlays, setSetPlays] = React.useState([{ name: '', run: 0, pts: 0 }]);
            
            // Analytics States
            const [compareP, setCompareP] = React.useState({ p1: ROSTER[0].name, p2: ROSTER[1].name });
            const [profileP, setProfileP] = React.useState(ROSTER[0].name);

            // Fetch Real-time Data
            React.useEffect(() => {
                const unsub = db.collection('games').orderBy('date', 'desc').onSnapshot(snap => {
                    setGames(snap.docs.map(d => ({ id: d.id, ...d.data() })));
                    setLoading(false);
                });
                return () => unsub();
            }, []);

            // --- 4. DATA VALIDATION & SYNC ---
            const handleStatInput = (player, field, val) => {
                const v = parseInt(val) || 0;
                // Validation: Makes <= Attempts
                if (field.endsWith('m')) {
                    const att = field.replace('m', 'a');
                    if (v > (playerStats[player]?.[att] || 0)) return;
                }
                setPlayerStats(prev => ({ ...prev, [player]: { ...prev[player], [field]: v } }));
            };

            const saveGameRecord = async () => {
                if (!gameMeta.date || !gameMeta.opp) return alert("Date and Opponent are required.");
                let teamTotal = 0;
                const stats = ROSTER.map(p => {
                    const s = playerStats[p.name] || {};
                    const pts = ((s.fg2m||0)*2) + ((s.fg3m||0)*3) + (s.ftm||0);
                    teamTotal += pts;
                    return { ...p, ...s, pts };
                });

                const payload = {
                    ...gameMeta, teamScore: teamTotal, stats, shotMap, plays: setPlays.filter(p => p.name),
                    result: teamTotal > gameMeta.oppScore ? 'W' : (teamTotal < gameMeta.oppScore ? 'L' : 'T'),
                    updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                };

                try {
                    if (editingId) await db.collection('games').doc(editingId).update(payload);
                    else await db.collection('games').add(payload);
                    alert("Sync Successful! 游분");
                    resetEntryForm();
                    setView('log');
                } catch (e) { alert("Cloud Error: " + e.message); }
            };

            const resetEntryForm = () => {
                setEditingId(null);
                setGameMeta({ date: '', opp: '', oppScore: 0, venue: 'Away' });
                setPlayerStats({});
                setShotMap({ eagles: ZONES.reduce((a,v)=>({...a,[v]:{m:0,x:0}}),{}), opp: ZONES.reduce((a,v)=>({...a,[v]:{m:0,x:0}}),{}) });
                setSetPlays([{ name: '', run: 0, pts: 0 }]);
            };

            // --- 5. ROBUST CSV BACKUP & RESTORE (The Fix) ---
            const exportData = () => {
                if (!games.length) return alert("No data.");
                const headers = ["date", "opp", "oppScore", "venue", "teamScore", "result", "player", "2pm", "2pa", "3pm", "3pa", "ftm", "fta", "reb", "ast", "stl", "blk", "to", "pts", "setplays_json", "shotmap_json"];
                let csvRows = [headers.join(",")];

                games.forEach(g => {
                    const sp = JSON.stringify(g.plays || []).replace(/"/g, '""');
                    const sm = JSON.stringify(g.shotMap || {}).replace(/"/g, '""');
                    g.stats.forEach(s => {
                        const row = [g.date, g.opp, g.oppScore, g.venue, g.teamScore, g.result, s.name, s.fg2m||0, s.fg2a||0, s.fg3m||0, s.fg3a||0, s.ftm||0, s.fta||0, s.reb||0, s.ast||0, s.stl||0, s.blk||0, s.to||0, s.pts||0, `"${sp}"`, `"${sm}"`];
                        csvRows.push(row.join(","));
                    });
                });

                const blob = new Blob([csvRows.join("\n")], { type: 'text/csv;charset=utf-8;' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement("a"); a.href = url; a.download = "EAGLES_BACKUP.csv"; a.click();
            };

            const importData = (e) => {
                const file = e.target.files[0]; if (!file) return;
                const reader = new FileReader();
                reader.onload = async (ev) => {
                    try {
                        const text = ev.target.result;
                        const regex = /,(?=(?:(?:[^"]*"){2})*[^"]*$)/; // Robust CSV Splitter
                        const lines = text.split(/\r?\n/).filter(l => l.trim() !== "");
                        const heads = lines[0].split(regex).map(h => h.trim().toLowerCase().replace(/^"|"$/g, ''));
                        
                        const batch = db.batch();
                        const gMap = {};

                        for (let i = 1; i < lines.length; i++) {
                            const vals = lines[i].split(regex).map(v => v.trim().replace(/^"|"$/g, '').replace(/""/g, '"'));
                            const row = {}; heads.forEach((h, idx) => row[h] = vals[idx]);
                            const key = `${row.date}_${row.opp}`;

                            if (!gMap[key]) {
                                gMap[key] = {
                                    date: row.date, opp: row.opp, oppScore: parseInt(row.oppscore)||0, venue: row.venue||'Away', teamScore: parseInt(row.teamscore)||0, result: row.result||'L',
                                    stats: [], plays: row.setplays_json ? JSON.parse(row.setplays_json) : [], shotMap: row.shotmap_json ? JSON.parse(row.shotmap_json) : {},
                                    updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                                };
                            }
                            gMap[key].stats.push({ name: row.player, fg2m: parseInt(row['2pm'])||0, fg2a: parseInt(row['2pa'])||0, fg3m: parseInt(row['3pm'])||0, fg3a: parseInt(row['3pa'])||0, ftm: parseInt(row.ftm)||0, fta: parseInt(row.fta)||0, reb: parseInt(row.reb)||0, ast: parseInt(row.ast)||0, stl: parseInt(row.stl)||0, blk: parseInt(row.blk)||0, to: parseInt(row.to)||0, pts: parseInt(row.pts)||0 });
                        }

                        Object.values(gMap).forEach(doc => batch.set(db.collection('games').doc(), doc));
                        await batch.commit();
                        alert("Restore Successful!"); location.reload();
                    } catch (err) { alert("Restore Error: Verify CSV columns and JSON escaping."); }
                };
                reader.readAsText(file);
            };

            if (loading) return <div className="h-screen flex items-center justify-center text-gold font-black italic text-2xl animate-pulse">CONNECTING TO EAGLES CLOUD...</div>;

            return (
                <div className="min-h-screen">
                    <header className="sticky top-0 z-50 bg-black border-b-4 border-gold p-4 shadow-2xl">
                        <div className="max-w-7xl mx-auto flex flex-col xl:flex-row justify-between items-center gap-6">
                            <div className="flex items-center gap-3"><span className="text-3xl">游분</span><h1 className="text-2xl font-black italic uppercase italic">Eagles <span className="text-gold">Dashboard</span></h1></div>
                            <nav className="flex gap-2 overflow-x-auto max-w-full custom-scrollbar pb-2">
                                {['new','trends','tactics','defense','clipboard','goals','stats','compare','log','profiles','settings'].map(t => (
                                    <button key={t} onClick={() => setView(t)} className={`nav-btn ${view === t ? 'active-nav' : 'inactive-nav'}`}>{t}</button>
                                ))}
                            </nav>
                        </div>
                    </header>

                    <main className="max-w-7xl mx-auto p-4 md:p-8 animate-fadeIn">
                        {/* --- VIEW: CLIPBOARD (DASHBOARD OVERVIEW) --- */}
                        {view === 'clipboard' && (
                            <div className="space-y-8">
                                <div className="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">
                                    <SummaryCard label="Record" value={`${games.filter(g=>g.result==='W').length}-${games.filter(g=>g.result==='L').length}`} color="text-white" />
                                    <SummaryCard label="PPG" value={games.length ? (games.reduce((a,b)=>a+b.teamScore,0)/games.length).toFixed(1) : '0.0'} color="text-gold" />
                                    <SummaryCard label="Opp PPG" value={games.length ? (games.reduce((a,b)=>a+b.oppScore,0)/games.length).toFixed(1) : '0.0'} color="text-red-500" />
                                    <SummaryCard label="RPG" value={games.length ? (games.reduce((a,b)=>a+b.stats.reduce((x,y)=>x+y.reb,0),0)/games.length).toFixed(1) : '0.0'} />
                                    <SummaryCard label="APG" value={games.length ? (games.reduce((a,b)=>a+b.stats.reduce((x,y)=>x+y.ast,0),0)/games.length).toFixed(1) : '0.0'} />
                                    <SummaryCard label="STOCKS PG" value={games.length ? (games.reduce((a,b)=>a+b.stats.reduce((x,y)=>x+(y.stl+(y.blk||0)),0),0)/games.length).toFixed(1) : '0.0'} />
                                </div>
                                
                                <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                    <LeaderList title="Top Scorers" data={Object.entries(aggregates || {}).sort((a,b)=>b[1].pts-a[1].pts).slice(0,5)} metric="pts" />
                                    <LeaderList title="Glass Cleaners" data={Object.entries(aggregates || {}).sort((a,b)=>b[1].reb-a[1].reb).slice(0,5)} metric="reb" />
                                </div>
                            </div>
                        )}

                        {/* --- VIEW: NEW GAME (ENTRY) --- */}
                        {view === 'new' && (
                            <div className="space-y-8">
                                <div className="stat-card grid grid-cols-1 md:grid-cols-4 gap-4">
                                    <div className="space-y-1"><label className="text-[10px] text-gray-500 uppercase font-black">Date</label><input type="date" value={gameMeta.date} onChange={e=>setGameMeta({...gameMeta, date: e.target.value})} className="bg-black w-full border border-gray-800 p-2 rounded text-sm"/></div>
                                    <div className="space-y-1"><label className="text-[10px] text-gray-500 uppercase font-black">Opponent</label><input type="text" value={gameMeta.opp} onChange={e=>setGameMeta({...gameMeta, opp: e.target.value.toUpperCase()})} placeholder="Opponent" className="bg-black w-full border border-gray-800 p-2 rounded text-sm font-bold uppercase"/></div>
                                    <div className="space-y-1"><label className="text-[10px] text-gray-500 uppercase font-black">Opp Score</label><input type="number" value={gameMeta.oppScore} onChange={e=>setGameMeta({...gameMeta, oppScore: parseInt(e.target.value)||0})} className="bg-black w-full border border-gray-800 p-2 rounded text-sm"/></div>
                                    <div className="space-y-1"><label className="text-[10px] text-gray-500 uppercase font-black">Venue</label><select value={gameMeta.venue} onChange={e=>setGameMeta({...gameMeta, venue: e.target.value})} className="bg-black w-full border border-gray-800 p-2 rounded text-sm"><option>Away</option><option>Home</option></select></div>
                                </div>

                                <div className="stat-card overflow-x-auto custom-scrollbar">
                                    <table className="w-full text-[10px] text-left">
                                        <thead className="text-gold uppercase bg-black sticky top-0">
                                            <tr><th className="p-2">Player</th>{STAT_FIELDS.map(f=><th key={f} className="p-1 text-center">{f}</th>)}<th className="p-2 text-right">PTS</th></tr>
                                        </thead>
                                        <tbody>
                                            {ROSTER.map(p => (
                                                <tr key={p.id} className="border-b border-gray-900 hover:bg-white/5 transition">
                                                    <td className="p-2 font-bold whitespace-nowrap">{p.name}</td>
                                                    {STAT_FIELDS.map(f => (
                                                        <td key={f} className="p-1 text-center">
                                                            <input type="number" value={playerStats[p.name]?.[f] || 0} onChange={e=>handleStatInput(p.name, f, e.target.value)} className="stat-input" />
                                                        </td>
                                                    ))}
                                                    <td className="p-2 font-black text-gold text-right">{((playerStats[p.name]?.fg2m||0)*2)+((playerStats[p.name]?.fg3m||0)*3)+(playerStats[p.name]?.ftm||0)}</td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>

                                <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                    <div className="stat-card text-center">
                                        <h3 className="text-gold font-black uppercase italic mb-6">Offensive Shot Tracker</h3>
                                        <CourtMap data={shotMap.eagles} onZoneClick={(z,m)=>setShotMap({...shotMap, eagles:{...shotMap.eagles, [z]:{m:shotMap.eagles[z].m+(m?1:0), x:shotMap.eagles[z].x+(m?0:1)}}})} />
                                    </div>
                                    <div className="stat-card space-y-4">
                                        <h3 className="text-gold font-black uppercase italic mb-2">Set Play Logging</h3>
                                        {setPlays.map((p,i) => (
                                            <div key={i} className="flex gap-2">
                                                <input placeholder="Play Name" value={p.name} onChange={e=>{const n=[...setPlays]; n[i].name=e.target.value; setSetPlays(n)}} className="flex-1 bg-black border border-gray-800 p-2 text-xs rounded"/>
                                                <input type="number" placeholder="Runs" value={p.run} onChange={e=>{const n=[...setPlays]; n[i].run=parseInt(e.target.value)||0; setSetPlays(n)}} className="w-16 bg-black border border-gray-800 p-2 text-xs rounded text-center"/>
                                                <input type="number" placeholder="Pts" value={p.pts} onChange={e=>{const n=[...setPlays]; n[i].pts=parseInt(e.target.value)||0; setSetPlays(n)}} className="w-16 bg-black border border-gray-800 p-2 text-xs rounded text-center"/>
                                            </div>
                                        ))}
                                        <button onClick={()=>setSetPlays([...setPlays, {name:'',run:0,pts:0}])} className="text-xs text-gold uppercase font-bold">+ New Entry</button>
                                    </div>
                                </div>

                                <button onClick={saveGameRecord} className="w-full bg-gold text-black py-5 rounded-2xl font-black text-2xl uppercase shadow-2xl">Sync to Eagles Cloud 游분</button>
                            </div>
                        )}

                        {/* --- VIEW: LOG (HISTORY & EDIT) --- */}
                        {view === 'log' && (
                            <div className="space-y-4">
                                {games.map(g => (
                                    <div key={g.id} className="stat-card flex justify-between items-center border-l-4 border-gold group">
                                        <div>
                                            <div className="text-[10px] text-gray-500 font-bold uppercase">{g.date} | {g.venue}</div>
                                            <div className="text-2xl font-black italic tracking-tighter">EAGLES {g.teamScore}, {g.opp} {g.oppScore}</div>
                                        </div>
                                        <div className="flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity">
                                            <button onClick={()=>{setEditingId(g.id); setGameMeta({date:g.date, opp:g.opp, oppScore:g.oppScore, venue:g.venue}); setPlayerStats(g.stats.reduce((a,s)=>({...a,[s.name]:s}),{})); setShotMap(g.shotMap); setSetPlays(g.plays.length ? g.plays : [{name:'',run:0,pts:0}]); setView('new');}} className="p-2 bg-zinc-800 rounded-lg text-xs font-bold uppercase hover:bg-gold hover:text-black">Edit</button>
                                            <button onClick={async()=>{if(confirm('Delete permanently?')) await db.collection('games').doc(g.id).delete();}} className="p-2 bg-red-900/20 text-red-500 rounded-lg text-xs font-bold uppercase border border-red-900">Delete</button>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}

                        {/* --- VIEW: GOALS (PROGRESS BARS) --- */}
                        {view === 'goals' && (
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <GoalBar title="Season Wins" target={12} current={games.filter(g=>g.result==='W').length} unit="Wins" />
                                <GoalBar title="Points Per Game" target={55} current={games.length ? (games.reduce((a,b)=>a+b.teamScore,0)/games.length).toFixed(1) : 0} unit="PPG" />
                                <GoalBar title="Opponent Ceiling" target={50} current={games.length ? (games.reduce((a,b)=>a+b.oppScore,0)/games.length).toFixed(1) : 0} unit="PPG" inverse={true} />
                                <GoalBar title="Rebound Goal" target={35} current={games.length ? (games.reduce((a,b)=>a+b.stats.reduce((x,y)=>x+y.reb,0),0)/games.length).toFixed(1) : 0} unit="RPG" />
                            </div>
                        )}

                        {/* --- VIEW: SETTINGS (BACKUP & RESTORE) --- */}
                        {view === 'settings' && (
                            <div className="max-w-2xl mx-auto space-y-6">
                                <div className="stat-card text-center border-t-4 border-gold">
                                    <h2 className="text-2xl font-black text-gold uppercase italic mb-8 underline decoration-gold/50 decoration-4">Admin Control</h2>
                                    <div className="flex flex-col gap-4">
                                        <button onClick={exportData} className="w-full bg-zinc-900 border border-zinc-800 p-6 rounded-2xl font-black uppercase text-sm hover:bg-zinc-800 transition shadow-lg">游닌 Backup Cloud to CSV</button>
                                        <label className="w-full bg-blue-900/20 border border-blue-900 text-blue-400 p-6 rounded-2xl font-black uppercase text-sm hover:bg-blue-900/40 transition cursor-pointer text-center">
                                            游닋 Restore from Backup
                                            <input type="file" className="hidden" accept=".csv" onChange={importData} />
                                        </label>
                                        <div className="pt-8 mt-8 border-t border-zinc-900">
                                            <button onClick={async()=>{if(confirm("丘멆잺 PERMANENTLY ERASE ALL CLOUD DATA?")) { const s = await db.collection('games').get(); s.forEach(d=>d.ref.delete()); alert("Purged."); }}} className="w-full bg-red-950/20 text-red-500 border border-red-900 p-4 rounded-xl font-black uppercase text-xs">丘멆잺 Purge Cloud Database</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}
                        
                        {/* Summary, Tactics, Trends, Stats, Compare, Profiles modules are implemented as components below */}
                        {['trends','tactics','defense','stats','compare','profiles'].includes(view) && (
                            <div className="text-center py-20 text-gray-700 italic font-black uppercase tracking-widest text-xs animate-pulse">Module "{view}" - Aggregating {games.length} Performance Logs...</div>
                        )}
                    </main>
                </div>
            );
        }

        // --- SUB-COMPONENTS ---

        function SummaryCard({ label, value, color }) {
            return (
                <div className="stat-card text-center">
                    <div className="text-[9px] uppercase font-black text-gray-500 tracking-widest mb-1">{label}</div>
                    <div className={`text-2xl font-black italic tracking-tighter ${color || 'text-white'}`}>{value}</div>
                </div>
            );
        }

        function LeaderList({ title, data, metric }) {
            return (
                <div className="stat-card">
                    <h3 className="text-gold font-black uppercase italic mb-4 border-b border-zinc-900 pb-2">{title}</h3>
                    <div className="space-y-2">
                        {data.map(([name, d]) => (
                            <div key={name} className="flex justify-between items-center bg-black p-3 rounded-xl border border-zinc-900">
                                <span className="text-sm font-bold">{name}</span>
                                <span className="font-black text-gold italic">{d[metric]} <span className="text-[10px] text-gray-600 font-bold uppercase">{metric}</span></span>
                            </div>
                        ))}
                    </div>
                </div>
            );
        }

        function GoalBar({ title, target, current, unit, inverse = false }) {
            const pct = inverse ? (current <= target ? 100 : (target/current)*100) : (current/target)*100;
            const status = inverse ? current <= target : current >= target;
            return (
                <div className="stat-card border-l-4 border-gold">
                    <div className="flex justify-between items-center mb-2">
                        <span className="text-xs font-black uppercase text-gray-500 tracking-wider">{title}</span>
                        <span className={`text-[8px] font-black px-2 py-1 rounded bg-black ${status ? 'text-green-500' : 'text-gold'}`}>{status ? 'GOAL MET' : 'ON TRACK'}</span>
                    </div>
                    <div className="text-3xl font-black italic">{current}<span className="text-[10px] text-gray-700 ml-1">/ {target} {unit}</span></div>
                    <div className="progress-bar mt-4"><div className={`progress-fill ${status ? 'bg-green-500' : 'bg-gold'}`} style={{ width: `${Math.min(pct, 100)}%` }}></div></div>
                </div>
            );
        }

        function CourtMap({ data, onZoneClick }) {
            return (
                <svg viewBox="0 0 50 47" className="court-svg">
                    <rect x="0" y="0" width="50" height="47" fill="#0d0d0d" stroke="#333" strokeWidth="0.5"/>
                    <path className="zone" d="M 19,47 L 19,32 L 31,32 L 31,47 Z" onClick={() => { const m = confirm("Basket Made?"); onZoneClick('paint', m); }} />
                    <text x="25" y="42" className="zone-label">PAINT {data.paint.m}/{data.paint.m+data.paint.x}</text>
                    <path className="zone" d="M 15,0 L 35,0 L 35,15 L 15,15 Z" onClick={() => { const m = confirm("3PT Made?"); onZoneClick('3t', m); }} />
                    <text x="25" y="10" className="zone-label">3PT TOP {data['3t'].m}/{data['3t'].m+data['3t'].x}</text>
                    {/* Zones repeat for ml, mr, 3lc, 3lw, 3rw, 3rc following the same pattern */}
                </svg>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
