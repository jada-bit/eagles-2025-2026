<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eagles Girls Basketball Dashboard</title>
    <!-- Core UI & Icons -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- React & Babel -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Firebase Compat SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <style>
        :root { --eagle-gold: #FFB81C; --eagle-black: #000000; }
        .bg-gold { background-color: var(--eagle-gold); }
        .text-gold { color: var(--eagle-gold); }
        .border-gold { border-color: var(--eagle-gold); }
        input[type="number"]::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        
        .stat-input { width: 45px; background: #111; border: 1px solid #333; border-radius: 4px; padding: 4px; text-align: center; color: white; font-size: 0.8rem; }
        .stat-input:focus { border-color: var(--eagle-gold); outline: none; background: #222; }
        
        .sticky-col { position: sticky; left: 0; background-color: #000; z-index: 10; border-right: 2px solid #333; }
        
        .nav-btn { font-size: 10px; font-weight: 800; text-transform: uppercase; padding: 8px 16px; border-radius: 9999px; transition: all 0.2s; white-space: nowrap; }
        .active-nav { background-color: var(--eagle-gold); color: black; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }
        .inactive-nav { color: #9ca3af; }
        .inactive-nav:hover { color: white; }
        
        .clipboard-card { background: #0a0a0a; border: 1px solid #222; border-top: 4px solid var(--eagle-gold); }
        .profile-stat-box { background: #111; border: 1px solid #222; padding: 1rem; border-radius: 0.75rem; text-align: center; }
        .modal-overlay { background: rgba(0,0,0,0.9); backdrop-filter: blur(4px); }
        
        /* Realistic Half-Court Geometry - Baseline at Bottom */
        .court-container { 
            position: relative; width: 100%; max-width: 500px; aspect-ratio: 50/47; 
            background: #0d0d0d; border: 2px solid #333; margin: 0 auto; border-radius: 8px; overflow: hidden;
            box-shadow: inset 0 0 50px rgba(0,0,0,0.8);
        }
        .court-line { position: absolute; background: rgba(255,255,255,0.15); pointer-events: none; }
        .baseline { bottom: 0; left: 0; width: 100%; height: 2px; }
        .the-key { bottom: 0; left: 50%; transform: translateX(-50%); width: 24%; height: 35%; border: 2px solid rgba(255,255,255,0.15); border-bottom: none; }
        .free-throw-circle { position: absolute; bottom: 23%; left: 50%; transform: translateX(-50%); width: 24%; aspect-ratio: 1; border: 2px solid rgba(255,255,255,0.15); border-radius: 50%; }
        
        /* 3PT Geometry: Peak Aligned with Circle Peak */
        .three-point-arc { 
            position: absolute; bottom: -35%; left: 7%; right: 7%; height: 70%; 
            border: 2px solid rgba(255,255,255,0.15); border-radius: 50%; pointer-events: none;
        }
        .three-point-straight-l { bottom: 0; left: 7%; width: 2px; height: 12%; }
        .three-point-straight-r { bottom: 0; right: 7%; width: 2px; height: 12%; }
        
        .backboard { bottom: 8%; left: 50%; transform: translateX(-50%); width: 12%; height: 2px; background: rgba(255,255,255,0.4); }
        .rim { bottom: 5%; left: 50%; transform: translateX(-50%); width: 6%; aspect-ratio: 1; border: 2px solid #e11d48; border-radius: 50%; position: absolute; }

        /* Tactical Zones Overlay */
        .court-zone { position: absolute; display: flex; flex-direction: column; align-items: center; justify-content: center; transition: all 0.2s; border-radius: 8px; z-index: 20; cursor: pointer; }
        .court-zone:hover { background: rgba(255, 184, 28, 0.1); outline: 1px solid var(--eagle-gold); }
        
        .zone-label { font-size: 8px; font-weight: 900; color: #555; text-transform: uppercase; margin-bottom: 2px; pointer-events: none; }
        .zone-input-group { display: flex; gap: 2px; align-items: center; }
        .zone-input { width: 34px; font-size: 11px; background: black; border: 1px solid #444; color: white; text-align: center; border-radius: 3px; padding: 1px 0; font-weight: bold; }
        
        /* 8-Zone Mapping Logic */
        .z-paint { bottom: 5%; left: 32%; width: 36%; height: 30%; }
        .z-mid-l { bottom: 12%; left: 14%; width: 16%; height: 25%; }
        .z-mid-r { bottom: 12%; right: 14%; width: 16%; height: 25%; }
        .z-3-lc { bottom: 2%; left: 0.5%; width: 6%; height: 15%; }
        .z-3-rc { bottom: 2%; right: 0.5%; width: 6%; height: 15%; }
        .z-3-lw { bottom: 35%; left: 1%; width: 12%; height: 30%; }
        .z-3-rw { bottom: 35%; right: 1%; width: 12%; height: 30%; }
        .z-3-t { top: 5%; left: 25%; width: 50%; height: 25%; }

        /* Giant Game Log Styles */
        .log-card { background: #000; border: 1px solid #222; border-radius: 2rem; overflow: hidden; margin-bottom: 1.5rem; transition: all 0.3s; border-left: 10px solid var(--eagle-gold); }
        .log-score { font-size: 2.5rem; font-weight: 900; font-style: italic; letter-spacing: -0.05em; line-height: 1; }
        .log-result-box { width: 4.5rem; height: 4.5rem; border-radius: 1.25rem; display: flex; align-items: center; justify-content: center; font-size: 2rem; font-weight: 900; }
    </style>
</head>
<body class="bg-gray-950">
    <div id="root"></div>

    <script type="text/babel">
        // --- YOUR FIREBASE CONFIG ---
        const firebaseConfig = {
            apiKey: "AIzaSyA5H5SsumWG7bym_0EZ7jOlfWeswpSauhk",
            authDomain: "eagles-stats.firebaseapp.com",
            projectId: "eagles-stats",
            storageBucket: "eagles-stats.firebasestorage.app",
            messagingSenderId: "386723096734",
            appId: "1:386723096734:web:b50e343c703983e838b38f",
            measurementId: "G-4SQEXFWE0W"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        const appId = "eagles-hq-v100";

        const ROSTER = [
            {id: 5, name: "Natasha Mistry", pos: "PG"}, {id: 3, name: "Mikayla Sanders", pos: "PG"},
            {id: 22, name: "Christina Lisack", pos: "PG/G"}, {id: 1, name: "Brittney Tang", pos: "G"},
            {id: 2, name: "Kylie Mulcahy", pos: "G"}, {id: 4, name: "Lexi Guild", pos: "G"},
            {id: 10, name: "Reese Jackson", pos: "F"}, {id: 32, name: "Gia Comey", pos: "F"},
            {id: 23, name: "Olivia Dozier", pos: "G/F"}, {id: 44, name: "Olivia Fraser", pos: "G/F"},
            {id: 34, name: "Dani Cardona", pos: "C"}, {id: 15, name: "Alexa Troiano", pos: "C"}
        ];

        const SHOT_ZONES = [
            { id: 'paint', label: 'Paint' }, { id: 'ml', label: 'Mid L' }, { id: 'mr', label: 'Mid R' },
            { id: '3lc', label: '3L Corner' }, { id: '3lw', label: '3L Wing' }, { id: '3t', label: '3 Top' },
            { id: '3rw', label: '3R Wing' }, { id: '3rc', label: '3R Corner' }
        ];

        const STAT_FIELDS = ['fg2m','fg2a','fg3m','fg3a','ftm','fta','reb','ast','stl','blk','to'];

        function App() {
            const [view, setView] = React.useState('entry');
            const [games, setGames] = React.useState([]);
            const [loading, setLoading] = React.useState(true);
            const [opponent, setOpponent] = React.useState('');
            const [oppScore, setOppScore] = React.useState(0);
            const [gameDate, setGameDate] = React.useState(new Date().toISOString().split('T')[0]);
            const [playerStats, setPlayerStats] = React.useState({});
            const [shotMap, setShotMap] = React.useState({
                eagles: SHOT_ZONES.reduce((acc, z) => ({ ...acc, [z.id]: { m: 0, x: 0 } }), {}),
                opp: SHOT_ZONES.reduce((acc, z) => ({ ...acc, [z.id]: { m: 0, x: 0 } }), {})
            });

            React.useEffect(() => {
                auth.signInAnonymously().catch(err => console.error(err));
                const unsubscribe = db.collection('artifacts').doc(appId).collection('public').doc('data').collection('games')
                    .onSnapshot((snapshot) => {
                        const docs = snapshot.docs.map(d => ({ id: d.id, ...d.data() }));
                        setGames(docs.sort((a, b) => new Date(b.date) - new Date(a.date)));
                        setLoading(false);
                    });
                return () => unsubscribe();
            }, []);

            const saveGame = async () => {
                if (!opponent) return alert("Enter Opponent Name");
                let teamScore = 0;
                const stats = ROSTER.map(p => {
                    const s = playerStats[p.name] || {};
                    const score = (s.fg2m||0)*2 + (s.fg3m||0)*3 + (s.ftm||0);
                    teamScore += score;
                    return { ...p, ...s, pts: score };
                });
                await db.collection('artifacts').doc(appId).collection('public').doc('data').collection('games').add({
                    date: gameDate, opp: opponent, oppScore, teamScore, 
                    result: teamScore > oppScore ? 'W' : 'L',
                    stats, shotMap
                });
                alert("Synced to Cloud!"); setOpponent(''); setPlayerStats({}); setView('log');
            };

            const aggregates = React.useMemo(() => {
                const data = {};
                ROSTER.forEach(r => data[r.name] = { gp:0, pts:0, reb:0, mft:0, aft:0, m3:0, a3:0, m2:0, a2:0 });
                games.forEach(g => {
                    g.stats.forEach(s => {
                        if(!data[s.name]) return;
                        const p = data[s.name]; p.gp++; p.pts += s.pts; p.reb += s.reb;
                        p.mft += (s.ftm || 0); p.aft += (s.fta || 0);
                        p.m3 += (s.fg3m || 0); p.a3 += (s.fg3a || 0);
                        p.m2 += (s.fg2m || 0); p.a2 += (s.fg2a || 0);
                    });
                });
                return data;
            }, [games]);

            const leaders = React.useMemo(() => {
                const list = Object.entries(aggregates).map(([n, d]) => ({ name: n, ...d }));
                return {
                    points: [...list].sort((a,b) => b.pts - a.pts).slice(0,3),
                    ppg: [...list].filter(x => x.gp > 0).sort((a,b) => (b.pts/b.gp) - (a.pts/a.gp)).slice(0,3),
                    rebounds: [...list].sort((a,b) => b.reb - a.reb).slice(0,3),
                    rpg: [...list].filter(x => x.gp > 0).sort((a,b) => (b.reb/b.gp) - (a.reb/a.gp)).slice(0,3),
                    ft: [...list].filter(x => x.aft > 0).sort((a,b) => (b.mft/b.aft) - (a.mft/a.aft)).slice(0,3),
                    fg3: [...list].filter(x => x.a3 >= x.gp).sort((a,b) => (b.m3/b.a3) - (a.m3/a.a3)).slice(0,3)
                };
            }, [aggregates]);

            if (loading) return (
                <div className="h-screen bg-black flex flex-col items-center justify-center">
                    <div className="text-white text-5xl mb-4 italic font-black uppercase">EAGLES <span className="text-gold">HQ</span></div>
                    <div className="text-gold text-lg font-black animate-pulse uppercase italic tracking-widest">Cloud Syncing...</div>
                </div>
            );

            return (
                <div className="min-h-screen bg-gray-950 text-white font-sans">
                    {/* Header */}
                    <header className="sticky top-0 z-50 bg-black border-b-4 border-gold p-4 md:p-6 shadow-2xl">
                        <div className="max-w-7xl mx-auto flex flex-col lg:flex-row justify-between items-center gap-6">
                            <div className="flex items-center gap-4">
                                <div className="bg-white w-12 h-12 rounded-full flex items-center justify-center border-2 border-gold shadow-lg transform -rotate-2">
                                    <span className="text-2xl">ðŸ¦…</span>
                                </div>
                                <div>
                                    <h1 className="text-3xl font-black italic uppercase tracking-tighter leading-none">Eagles <span className="text-gold">Dashboard</span></h1>
                                    <p className="text-[9px] text-gray-500 uppercase tracking-widest mt-1 font-bold tracking-tighter">Performance & Tactical Analytics</p>
                                </div>
                            </div>
                            <nav className="flex flex-wrap justify-center gap-1 bg-gray-900 p-1 rounded-full border border-gray-800 overflow-x-auto max-w-full">
                                {['entry', 'log', 'clipboard', 'summary'].map(v => (
                                    <button 
                                        key={v} 
                                        onClick={() => setView(v)} 
                                        className={`nav-btn ${view === v ? 'active-nav' : 'inactive-nav'}`}
                                    >
                                        {v === 'entry' ? 'New Game' : v === 'log' ? 'Season Log' : v === 'clipboard' ? 'Clipboard' : 'Season Stats'}
                                    </button>
                                ))}
                            </nav>
                        </div>
                    </header>

                    <div className="max-w-7xl mx-auto p-4 md:p-8">
                        {view === 'entry' && (
                            <div className="space-y-8 animate-fadeIn">
                                <div className="bg-black border border-gray-800 rounded-2xl shadow-2xl overflow-hidden mb-8">
                                    <div className="p-6 grid grid-cols-1 md:grid-cols-3 gap-6 bg-gray-900 border-b border-gray-800">
                                        <div className="space-y-1">
                                            <label className="text-[10px] text-gold font-bold uppercase tracking-widest">Game Date</label>
                                            <input type="date" value={gameDate} onChange={e => setGameDate(e.target.value)} className="w-full bg-black border border-gray-700 p-3 rounded-lg text-white outline-none focus:border-gold text-sm" />
                                        </div>
                                        <div className="space-y-1">
                                            <label className="text-[10px] text-gold font-bold uppercase tracking-widest">Opponent Name</label>
                                            <input type="text" value={opponent} onChange={e => setOpponent(e.target.value)} placeholder="Enter Opponent" className="w-full bg-black border border-gray-700 p-3 rounded-lg text-white outline-none focus:border-gold text-sm uppercase font-bold" />
                                        </div>
                                        <div className="space-y-1">
                                            <label className="text-[10px] text-red-500 font-bold uppercase tracking-widest">Opponent Score</label>
                                            <input type="number" value={oppScore} onChange={e => setOppScore(e.target.value)} placeholder="Score" className="w-full bg-black border border-gray-700 p-3 rounded-lg text-white outline-none focus:border-red-500 text-sm font-black" />
                                        </div>
                                    </div>

                                    <div className="overflow-x-auto">
                                        <table className="w-full text-left">
                                            <thead>
                                                <tr className="bg-gray-950 text-gold text-[9px] uppercase border-b border-gray-800">
                                                    <th className="p-4 sticky left-0 bg-black z-10 border-r border-gray-800">Player</th>
                                                    {['2PM','2PA','3PM','3PA','FTM','FTA','REB','AST','STL','BLK','TO'].map(h => <th key={h} className="p-2 text-center">{h}</th>)}
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {ROSTER.map(p => (
                                                    <tr key={p.id} className="border-b border-gray-900 group hover:bg-white/5 transition-colors">
                                                        <td className="p-4 font-bold text-gray-400 group-hover:text-white sticky left-0 bg-black z-10 whitespace-nowrap border-r border-gray-800">
                                                            <span className="text-gold text-[10px] mr-2">{p.pos}</span> {p.name}
                                                        </td>
                                                        {STAT_FIELDS.map(f => (
                                                            <td key={f} className="p-2 text-center">
                                                                <input type="number" className="stat-input" onChange={e => handleStatChange(p.name, f, e.target.value)} />
                                                            </td>
                                                        ))}
                                                    </tr>
                                                ))}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                    <div className="bg-black border border-gray-800 rounded-2xl p-8 shadow-xl text-center">
                                        <p className="text-[10px] font-black uppercase text-white mb-6 italic tracking-widest bg-gray-900 py-3 rounded-xl">Eagles Chart: (M) Makes / (X) Misses</p>
                                        <div className="court-container">
                                            <div className="court-line baseline"></div><div className="court-line the-key"></div><div className="court-line free-throw-circle"></div><div className="court-line three-point-straight-l"></div><div className="court-line three-point-straight-r"></div><div className="three-point-arc"></div><div className="rim"></div>
                                            {SHOT_ZONES.map(z => (
                                                <div key={z.id} className={`court-zone z-${z.id}`}>
                                                    <span className="zone-label">{z.label}</span>
                                                    <div className="zone-input-group">
                                                        <input type="number" className="zone-input text-gold" placeholder="M" onChange={e => {const nm={...shotMap}; nm.eagles[z.id].m=parseInt(e.target.value)||0; setShotMap(nm);}} />
                                                        <span className="text-gray-600">/</span>
                                                        <input type="number" className="zone-input text-white/50" placeholder="X" onChange={e => {const nm={...shotMap}; nm.eagles[z.id].x=parseInt(e.target.value)||0; setShotMap(nm);}} />
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                    <div className="bg-black border border-gray-800 rounded-2xl p-8 shadow-xl text-center">
                                        <p className="text-[10px] font-black uppercase text-red-500 mb-6 italic tracking-widest bg-red-950/20 py-3 rounded-xl">Opponent Chart: (M) Makes / (X) Misses</p>
                                        <div className="court-container border-red-900/40">
                                            <div className="court-line baseline"></div><div className="court-line the-key"></div><div className="court-line free-throw-circle"></div><div className="court-line three-point-straight-l"></div><div className="court-line three-point-straight-r"></div><div className="three-point-arc"></div><div className="rim"></div>
                                            {SHOT_ZONES.map(z => (
                                                <div key={z.id} className={`court-zone z-${z.id}`}>
                                                    <span className="zone-label text-red-900">{z.label}</span>
                                                    <div className="zone-input-group">
                                                        <input type="number" className="zone-input text-red-500" placeholder="M" onChange={e => {const nm={...shotMap}; nm.opp[z.id].m=parseInt(e.target.value)||0; setShotMap(nm);}} />
                                                        <span className="text-gray-600">/</span>
                                                        <input type="number" className="zone-input text-white/50" placeholder="X" onChange={e => {const nm={...shotMap}; nm.opp[z.id].x=parseInt(e.target.value)||0; setShotMap(nm);}} />
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                                <button onClick={saveGame} className="w-full bg-gold text-black py-10 rounded-3xl font-black text-4xl uppercase shadow-2xl hover:scale-[1.02] transition-transform ring-8 ring-gold/10">Sync Game to Cloud</button>
                            </div>
                        )}

                        {view === 'log' && (
                            <div className="space-y-8 animate-fadeIn">
                                <h2 className="text-5xl font-black italic uppercase text-gold tracking-tighter">Season Log</h2>
                                {games.length === 0 ? (
                                    <div className="py-40 text-center text-gray-700 uppercase font-black italic border-2 border-dashed border-gray-800 rounded-[3rem]">No Records found.</div>
                                ) : (
                                    games.map(g => (
                                        <div key={g.id} className="log-card p-10 flex flex-col lg:flex-row justify-between items-center gap-10">
                                            <div className="flex items-center gap-10">
                                                <div className={`log-result-box bg-gray-950 border-2 border-gray-800 ${g.result === 'W' ? 'text-gold' : 'text-red-600'}`}>{g.result}</div>
                                                <div>
                                                    <div className="text-base text-gray-500 font-black uppercase tracking-[0.4em] mb-2 italic">{g.date}</div>
                                                    <div className="log-score uppercase">EAGLES {g.teamScore}, {g.opp} {g.oppScore}</div>
                                                </div>
                                            </div>
                                            <button onClick={() => {if(confirm("Delete Game?")) db.collection('artifacts').doc(appId).collection('public').doc('data').collection('games').doc(g.id).delete();}} className="text-red-500 border border-red-900 px-8 py-4 rounded-2xl hover:bg-red-900 hover:text-white transition-all uppercase font-black tracking-widest text-sm">Delete Game</button>
                                        </div>
                                    ))
                                )}
                            </div>
                        )}

                        {view === 'clipboard' && (
                            <div className="animate-fadeIn space-y-8">
                                <div className="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4">
                                    {[
                                        {l: 'Record', v: `${games.filter(g => g.result === 'W').length}-${games.filter(g => g.result === 'L').length}`},
                                        {l: 'Team PPG', v: games.length ? (games.reduce((a,b) => a + b.teamScore, 0) / games.length).toFixed(1) : 0},
                                        {l: 'RPG', v: games.length ? (Object.values(aggregates).reduce((a,b) => a + b.reb, 0) / games.length).toFixed(1) : 0},
                                        {l: 'Win %', v: games.length ? ((games.filter(g => g.result === 'W').length / games.length) * 100).toFixed(0) + '%' : '0%'}
                                    ].map((m, i) => (
                                        <div key={i} className="bg-black border border-gray-800 p-6 rounded-2xl text-center border-t-4 border-t-gold shadow-xl">
                                            <div className="text-[10px] uppercase font-black text-gray-500 mb-1">{m.l}</div>
                                            <div className="text-3xl font-black italic text-white">{m.v}</div>
                                        </div>
                                    ))}
                                </div>

                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                                    <div className="clipboard-card">
                                        <h3 className="text-lg font-black uppercase italic mb-4 text-gold border-b border-gray-900 pb-2">Top 3 Scorers</h3>
                                        <div className="space-y-2">
                                            <p className="text-[8px] uppercase font-black text-gray-600">Season Totals</p>
                                            {leaders.points.map((p, i) => <div key={i} className="flex justify-between bg-gray-950 p-3 rounded mb-1 border border-gray-900"><span className="text-sm font-bold">{p.name}</span><span className="font-black text-gold">{p.pts}</span></div>)}
                                            <p className="text-[8px] uppercase font-black text-gray-600 mt-4">Points Per Game</p>
                                            {leaders.ppg.map((p, i) => <div key={i} className="flex justify-between p-2 text-xs border-b border-gray-900"><span className="font-bold text-gray-400">{p.name}</span><span className="font-black">{(p.pts/p.gp).toFixed(1)}</span></div>)}
                                        </div>
                                    </div>
                                    <div className="clipboard-card">
                                        <h3 className="text-lg font-black uppercase italic mb-4 text-white border-b border-gray-900 pb-2">Top 3 Boards</h3>
                                        <div className="space-y-2">
                                            <p className="text-[8px] uppercase font-black text-gray-600">Season Totals</p>
                                            {leaders.rebounds.map((p, i) => <div key={i} className="flex justify-between bg-gray-950 p-3 rounded mb-1 border border-gray-900"><span className="text-sm font-bold">{p.name}</span><span className="font-black text-white">{p.reb}</span></div>)}
                                            <p className="text-[8px] uppercase font-black text-gray-600 mt-4">Average RPG</p>
                                            {leaders.rpg.map((p, i) => <div key={i} className="flex justify-between p-2 text-xs border-b border-gray-900"><span className="font-bold text-gray-400">{p.name}</span><span className="font-black">{(p.reb/p.gp).toFixed(1)}</span></div>)}
                                        </div>
                                    </div>
                                    <div className="clipboard-card">
                                        <h3 className="text-lg font-black uppercase italic mb-4 text-gold border-b border-gray-900 pb-2">Top 3 FT%</h3>
                                        <div className="space-y-3">
                                            {leaders.ft.map((p, i) => (
                                                <div key={i} className="flex justify-between bg-gray-950 p-3 rounded border border-gray-900">
                                                    <span className="text-sm font-bold">{p.name}</span>
                                                    <div className="text-right leading-none"><div className="font-black text-gold italic text-base">{((p.mft/p.aft)*100).toFixed(0)}%</div><div className="text-[8px] text-gray-600 mt-1">{p.mft}/{p.aft}</div></div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                    <div className="clipboard-card">
                                        <h3 className="text-lg font-black uppercase italic mb-4 text-white border-b border-gray-900 pb-2">Efficiency (3PT)</h3>
                                        <div className="space-y-3">
                                            {leaders.fg3.map((p, i) => (
                                                <div key={i} className="flex justify-between bg-gray-950 p-3 rounded border border-gray-900">
                                                    <span className="text-sm font-bold">{p.name}</span>
                                                    <div className="text-right leading-none"><div className="font-black text-white italic text-base">{((p.m3/p.a3)*100).toFixed(1)}%</div><div className="text-[8px] text-gray-600 mt-1">{p.m3}/{p.a3}</div></div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {view === 'summary' && (
                            <div className="space-y-8 animate-fadeIn">
                                <div className="bg-black border border-gray-800 rounded-[2.5rem] overflow-hidden shadow-2xl">
                                    <div className="overflow-x-auto">
                                        <table className="w-full text-left text-xs">
                                            <thead className="bg-gray-900 text-gold uppercase border-b border-gray-800">
                                                <tr><th className="p-4 sticky left-0 bg-gray-900">Player</th><th>POS</th><th>GP</th><th>PPG</th><th>RPG</th><th>AST/G</th><th>STL/G</th><th>FT%</th><th>3PT%</th></tr>
                                            </thead>
                                            <tbody>
                                                {Object.entries(aggregates).map(([name, d]) => {
                                                    if(d.gp === 0) return null;
                                                    const rP = ROSTER.find(r => r.name === name);
                                                    return (
                                                        <tr key={name} className="border-b border-gray-900 hover:bg-white/5">
                                                            <td className="p-4 font-bold sticky left-0 bg-black text-gold">{name}</td>
                                                            <td className="p-4 text-gray-500 font-bold">{rP?.pos}</td>
                                                            <td className="p-4">{d.gp}</td>
                                                            <td className="p-4 font-black">{(d.pts/d.gp).toFixed(1)}</td>
                                                            <td className="p-4">{(d.reb/d.gp).toFixed(1)}</td>
                                                            <td className="p-4 text-gray-400">{(Object.values(games).reduce((acc,g) => acc + (g.stats.find(s=>s.name===name)?.ast||0),0)/d.gp).toFixed(1)}</td>
                                                            <td className="p-4 text-gray-400">{(Object.values(games).reduce((acc,g) => acc + (g.stats.find(s=>s.name===name)?.stl||0),0)/d.gp).toFixed(1)}</td>
                                                            <td className="p-4">{d.aft > 0 ? ((d.mft/d.aft)*100).toFixed(0) + '%' : '-'}</td>
                                                            <td className="p-4">{d.a3 > 0 ? ((d.m3/d.a3)*100).toFixed(1) + '%' : '-'}</td>
                                                        </tr>
                                                    );
                                                })}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
